# FaunaDB Demo App

## Prerequisites

### Set up Schema

### Obtain an Admin API Key
https://app.fauna.com/documentation/howto/crud#obtain-an-admin-api-key

## Runing the app

## API Reference

### Create a Post
Creates a new Post with an autogenerated Id.

__Request__

```
POST /posts
```

```
Content-type: application/json
{
  "title": "My cat and other marvels",
  "tags": ["pet", "cute"]
}
```

__Response__

```
Status: 201 - Created
```
```
Content-type: application/json
{
  "id": "219871526709625348",
  "title": "My cat and other marvels",
  "tags": ["pet", "cute"]
}
```

### Create several Posts

__Request__

```
POST /posts
```

```
Content-type: application/json
[
  {"title": "My cat and other marvels", "tags": ["pet", "cute"]},
  {"title": "Pondering during a commute", "tags": ["commuting"]},
  {"title": "Deep meanings in a latte", "tags": ["coffee"]}
]
```

__Response__

```
Status: 200 - OK
```

```
Content-type: application/json
[
  {
    "id": "219970669169869319",
    "title": "My cat and other marvels",
    "tags": ["pet", "cute"]
  },
  {
    "id": "219970865138237959",
    "title": "Pondering during a commute",
    "tags": ["commuting"]
  },
  {
    "id": "219970873639043587",
    "title": "Deep meanings in a latte",
    "tags": ["coffee"]
  }
]
```

### Retrieve a Post
Retrieves an existent Post for the given Id. If the Post cannot be found, a `404 - Not Found` response is returned.

__Request__

```
GET /posts/{post_id}
```

__Response__

```
Status: 200 - OK
```
```
Content-type: application/json
{
  "id": "219871526709625348",
  "title": "My cat and other marvels",
  "tags": ["pet", "cute"]
}
```

### Retrieve Posts
__Request__

```
GET /posts
```

__Response__

```
Status: 200 - OK
```

```
Content-type: application/json
[
  {
    "id": "219970669169869319",
    "title": "My cat and other marvels",
    "tags": ["pet", "cute"]
  },
  {
    "id": "219970865138237959",
    "title": "Pondering during a commute",
    "tags": ["commuting"]
  },
  {
    "id": "219970873639043587",
    "title": "Deep meanings in a latte",
    "tags": ["coffee"]
  }
]
```

### Retrieve Posts by Tags
```
GET /posts?tags=pet,coffee
```

```
Content-type: application/json
[
  {
    "id": "219970669169869319",
    "title": "My cat and other marvels",
    "tags": ["pet", "cute"]
  },
  {
    "id": "219970873639043587",
    "title": "Deep meanings in a latte",
    "tags": ["coffee"]
  }
]
```

### Replace a Post
It replaces an existent Post for the given Id with given fields. All fields should be provided in the representation along the request. If optional fields are not provided they will be set as empty. If the Post cannot be found, a `404 - Not Found` response is returned.

__Request__

```
PUT /posts/{post_id}
```

```
Content-type: application/json
{
  "title": "My dog and other marvels"
}
```

__Response__

```
Status: 200 - OK
```
```
Content-type: application/json
{
  "id": "219871526709625348"
  "title": "My dog and other marvels",
  "tags": []
}
```

> INFO: note that as the 'tags' field has not been provided in the request, it has been set as empty.

### Update a Post
Partially updates an existent Post for the given Id with the given fields. Only the subset of the provided fields will be updated. If the Post cannot be found, a `404 - Not Found` response is returned.

__Request__

```
PATCH /posts/{post_id}
```

```
Content-type: application/json
{
  "title": "My dog and other marvels"
}
```

__Response__

```
Status: 200 - OK
```
```
Content-type: application/json
{
  "id": "219871526709625348"
  "title": "My dog and other marvels"
  "tags": ["pet", "cute"]
}
```

> INFO: note that although as the 'tags' field has not been provided in the request, it has not been modified.

### Delete a Post
Deletes an existent Post for the given Id. If the Post cannot be found, a `404 - Not Found` response is returned.


__Request__

```
DELETE /posts/{post_id}
```

__Response__

```
Status: 200 - OK
```
```
Content-type: application/json
{
  "id": "219871526709625348",
  "title": "My cat and other marvels",
  "tags": ["pet", "cute"]
}
```


## FQL Reference
// TODO as FQL queries